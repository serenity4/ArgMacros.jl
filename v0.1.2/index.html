<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guide · ArgMacros</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ArgMacros</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Guide</a><ul class="internal"><li><a class="tocitem" href="#Why-ArgMacros?-1"><span>Why ArgMacros?</span></a></li><li><a class="tocitem" href="#Installation-1"><span>Installation</span></a></li><li><a class="tocitem" href="#Adding-Arguments-1"><span>Adding Arguments</span></a></li><li><a class="tocitem" href="#Using-Argument-Values-1"><span>Using Argument Values</span></a></li><li><a class="tocitem" href="#Validating-Arguments-1"><span>Validating Arguments</span></a></li><li><a class="tocitem" href="#Adding-Help-1"><span>Adding Help</span></a></li><li><a class="tocitem" href="#Leftover-Arguments-1"><span>Leftover Arguments</span></a></li><li><a class="tocitem" href="#Taking-Argument-Code-out-of-Main-Function-1"><span>Taking Argument Code out of Main Function</span></a></li></ul></li><li><a class="tocitem" href="macros/">Available Macros</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/zachmatson/ArgMacros.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Guide-1"><a class="docs-heading-anchor" href="#Guide-1">Guide</a><a class="docs-heading-anchor-permalink" href="#Guide-1" title="Permalink"></a></h1><p>This page will offer an introduction on using ArgMacros to read command-line arguments. Reading through this before using the package is recommended.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Version 0.1.x of ArgMacros might be rough around some edge cases.  Make sure to test the interface you build before using it. If you notice any issues or want to request new features, create an issue on <a href="https://github.com/zachmatson/ArgMacros.jl">GitHub</a></p></div></div><h2 id="Why-ArgMacros?-1"><a class="docs-heading-anchor" href="#Why-ArgMacros?-1">Why ArgMacros?</a><a class="docs-heading-anchor-permalink" href="#Why-ArgMacros?-1" title="Permalink"></a></h2><p>ArgMacros is designed for parsing arguments in command-line Julia scripts. Compilation time is the greatest bottleneck for startup of scripts in Julia, and is mostly unavoidable. While attention is paid to making code that compiles relatively quickly, the emphasis of ArgMacros is on quick parsing and type stability after compilation. </p><p>Variables created using ArgMacros are statically typed, and available immediately within your main function, without manually  retrieving them from an intermediate data structure. This can also make it more convenient when writing scripts.</p><h2 id="Installation-1"><a class="docs-heading-anchor" href="#Installation-1">Installation</a><a class="docs-heading-anchor-permalink" href="#Installation-1" title="Permalink"></a></h2><p>Install ArgMacros using Julia&#39;s Pkg package manager. Enter the Pkg prompt by typing <code>]</code> at the REPL and then install:</p><pre><code class="language-julia-repl">(@v1.4) pkg&gt; add ArgMacros</code></pre><p>Then load ArgMacros into your script with <code>using ArgMacros</code>.</p><h2 id="Adding-Arguments-1"><a class="docs-heading-anchor" href="#Adding-Arguments-1">Adding Arguments</a><a class="docs-heading-anchor-permalink" href="#Adding-Arguments-1" title="Permalink"></a></h2><p>All arguments must be declared using the macros provided, and all of the declarations must exist within the <a href="macros/#ArgMacros.@beginarguments"><code>@beginarguments</code></a> block like so:</p><pre><code class="language-julia">@beginarguments begin
    *arguments go here*
end</code></pre><p>The types of arguments supported are broken down into two main categories:</p><ul><li>Options (<code>@argument...</code>) - Marked with flags<ul><li><a href="macros/#ArgMacros.@argumentrequired"><code>@argumentrequired</code></a></li><li><a href="macros/#ArgMacros.@argumentdefault"><code>@argumentdefault</code></a></li><li><a href="macros/#ArgMacros.@argumentoptional"><code>@argumentoptional</code></a></li><li><a href="macros/#ArgMacros.@argumentflag"><code>@argumentflag</code></a></li><li><a href="macros/#ArgMacros.@argumentcount"><code>@argumentcount</code></a></li></ul></li><li>Positionals (<code>@positional...</code>) - Identified by position in argument list<ul><li><a href="macros/#ArgMacros.@positionalrequired"><code>@positionalrequired</code></a></li><li><a href="macros/#ArgMacros.@positionaldefault"><code>@positionaldefault</code></a></li><li><a href="macros/#ArgMacros.@positionaloptional"><code>@positionaloptional</code></a></li></ul></li></ul><p>The arguments are either required, optional, or have default values, as is evident in their names. Additionally, <a href="macros/#ArgMacros.@argumentflag"><code>@argumentflag</code></a> checks the presence of a flag, and <a href="macros/#ArgMacros.@argumentcount"><code>@argumentcount</code></a> counts how many times a flag appears. Most of the argument types require specifying a type and a local variable name, while options also require flag(s) to be specified, and default arguments require their default value to be specified.</p><p>Parsing is carried out by fetching values for the options first, then the positional arguments. Values will be fetched in the order that arguments are declared.  For this reason, ALL options must be declared before ANY positionals, required  positionals must be declared before default/optional ones, and positional arguments must be declared in the order the user is expected to enter them.</p><p>Here is an example with some arguments:</p><pre><code class="language-julia">@beginarguments begin
    @argumentrequired String foo &quot;-f&quot; &quot;--foo&quot;
    @argumentdefault String &quot;lorem ipsum&quot; bar &quot;--bar&quot;
    @argumentflag verbose &quot;-v&quot;
    @positionalrequired String input &quot;input_file&quot;
    @positionaloptional String output &quot;output_file&quot;
end</code></pre><p>As you can see, options allow using long option names, short option names, or both. <a href="macros/#ArgMacros.@argumentcount"><code>@argumentcount</code></a> is a special case and only allows a single long or short name to be given. Positionals allow an optional &quot;help name&quot; to be specified, which is presented to the user instead of the name of local variable they will be stored in.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The ordering rules for argument declarations should be enforced at compile time, but making sure to follow them is essential to your code running properly. Additionally, make sure not to declare multiple arguments using the same flags. Other than the reserved <code>-h</code> and <code>--help</code> flags, this will not be detected automatically at compile time, and could lead to undefined behavior. </p></div></div><h2 id="Using-Argument-Values-1"><a class="docs-heading-anchor" href="#Using-Argument-Values-1">Using Argument Values</a><a class="docs-heading-anchor-permalink" href="#Using-Argument-Values-1" title="Permalink"></a></h2><p>Once an argument is decalred, it is statically typed and you can be sure it holds a value of the correct type. <a href="macros/#ArgMacros.@argumentoptional"><code>@argumentoptional</code></a> and <a href="macros/#ArgMacros.@positionaloptional"><code>@positionaloptional</code></a> will use the type <code>Union{T, Nothing}</code>, however, and may also contain <code>nothing</code>. <a href="macros/#ArgMacros.@argumentflag"><code>@argumentflag</code></a> uses <code>Bool</code> and <a href="macros/#ArgMacros.@argumentcount"><code>@argumentcount</code></a> uses <code>Int</code>. The other macros will all store the type specified. No additional code is required to begin using the  argument value after parsing.</p><p>You should make your argument types <code>Symbol</code>, <code>String</code>, or subtypes of <code>Number</code>.</p><pre><code class="language-julia">function main()
    @beginarguments begin
        @positionalrequired Int x
        @positionaldefault Int 5 y
        @positionaloptional Int z
    end

    println(x + y) # Prints x + y, the variable names are available right away and must be Ints
    println(isnothing(z)) # z might be nothing, because it was optional
    z = nothing # It is fine to store values of type Nothing or Int in z now
    z = 8
    x = 5.5 # Raises an error, x must hold Int values
    y = nothing # Raises an error, only optional arguments can hold nothing
end</code></pre><h2 id="Validating-Arguments-1"><a class="docs-heading-anchor" href="#Validating-Arguments-1">Validating Arguments</a><a class="docs-heading-anchor-permalink" href="#Validating-Arguments-1" title="Permalink"></a></h2><p>Perhaps you want to impose certain conditions on the values of an argument beyond its type. You can use the <a href="macros/#ArgMacros.@argtest"><code>@argtest</code></a> macro, which will exit the program if a specified unary predicate returns <code>false</code> for the argument value.</p><p>If using an anonymous function for this, make sure to enclose it in parentheses so it is passed to the  macro as a single expression.</p><pre><code class="language-julia">@beginarguments begin
    ...
    @positionalrequired String input &quot;input_file&quot;
    @argtest input isfile &quot;The input must be a valid file&quot; # Confirm that the input file really exists
    ...
end</code></pre><h2 id="Adding-Help-1"><a class="docs-heading-anchor" href="#Adding-Help-1">Adding Help</a><a class="docs-heading-anchor-permalink" href="#Adding-Help-1" title="Permalink"></a></h2><p>ArgMacros also allows you to create a help screen, accessed by the <code>-h</code> or <code>--help</code> flags. A listing of arguments and their types is created by default, but usage information,  a description, an epilog, and individual argument descriptions can be specified too using the appropriate macros. When using the <a href="macros/#ArgMacros.@arghelp"><code>@arghelp</code></a> macro, note that it always applies to the last argument declared BEFORE the macro is used. The <a href="macros/#ArgMacros.@helpusage"><code>@helpusage</code></a> will prepend your usage text with &quot;Usage: &quot;, so do not include this in the string you pass.</p><p>It is recommended to place <a href="macros/#ArgMacros.@helpusage"><code>@helpusage</code></a>, <a href="macros/#ArgMacros.@helpdescription"><code>@helpdescription</code></a>, and <a href="macros/#ArgMacros.@helpepilog"><code>@helpepilog</code></a> in that order at the beginning of the <a href="macros/#ArgMacros.@beginarguments"><code>@beginarguments</code></a> block, but this is not a requirement.</p><pre><code class="language-julia">@beginarguments begin
    @helpusage &quot;example.jl input_file [output_file] [-f | --foo] [--bar] [-v]&quot;
    @helpdescription &quot;&quot;&quot;
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Praesent eu auctor risus. Morbi a nisl nisi.
        Ut at lorem non lorem accumsan auctor. Class aptent taciti
        sociosqu ad litora torquent per conubia nostra, per inceptos
        himenaeos. Aenean ornare ultrices tellus quis convallis.
        &quot;&quot;&quot;
    @helpepilog &quot;© 2020&quot;
    ...
    @positionalrequired String input &quot;input_file&quot;
    @argtest input isfile &quot;The input must be a valid file&quot;
    @arghelp &quot;The name of the file to be taken as input.&quot;
    ...
end</code></pre><h2 id="Leftover-Arguments-1"><a class="docs-heading-anchor" href="#Leftover-Arguments-1">Leftover Arguments</a><a class="docs-heading-anchor-permalink" href="#Leftover-Arguments-1" title="Permalink"></a></h2><p>By default, the program will exit and print a warning if more arguments are given than the program declares. If you don&#39;t want this to happen, include the <a href="macros/#ArgMacros.@allowextraarguments"><code>@allowextraarguments</code></a> macro.</p><p>This can occur anywhere inside the <a href="macros/#ArgMacros.@beginarguments"><code>@beginarguments</code></a> block, but the recommended placement is at the end, after all other help, test, and argument declarations.</p><pre><code class="language-julia">@beginarguments begin
    ...
    @allowextraarguments
end</code></pre><h2 id="Taking-Argument-Code-out-of-Main-Function-1"><a class="docs-heading-anchor" href="#Taking-Argument-Code-out-of-Main-Function-1">Taking Argument Code out of Main Function</a><a class="docs-heading-anchor-permalink" href="#Taking-Argument-Code-out-of-Main-Function-1" title="Permalink"></a></h2><p>It may be preferable, in some cases, not to declare all of your arguments and help information inside of your main function. In this case, the <a href="macros/#ArgMacros.@beginarguments"><code>@beginarguments</code></a> block can be enclosed in a macro:</p><pre><code class="language-julia">macro handleargs()
    return esc(quote
        @beginarguments begin
            ...
        end
    end)
end

function main()
    @handleargs
    ...
    # The argument values will be available here
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="macros/">Available Macros »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 27 May 2020 00:27">Wednesday 27 May 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
